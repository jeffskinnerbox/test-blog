<!--
Maintainer:   jeffskinnerbox@yahoo.com / www.jeffskinnerbox.me
Version:      0.0.0
-->


# Installation of Pelican
To install Pelican and its dependancies

```bash
sudo apt-get install python-pip python-virtualenv virtualenvwrapper
sudo apt-get install python-dev

sudo pip install pelican3.6.3
sudo pip install markdown MathJaxPlugin latex2markdown typogrify
```

## Installation of TiddlyWiki
Install Node.js via `apt-get`.
Because of a conflict with another package (amateur radio node package,
the executable from the Ubuntu repositories is called `nodejs` instead of `node`.
Node.js package manager and other programs will want to call it "node",
so you'll need to set up a symbolic link between `nodejs` and `node`.

```bash
# install the Node.js engine and its package manager
sudo apt-get install nodejs npm

# create symbolic link
sudo ln -s /usr/bin/nodejs /usr/bin/node
```

You can install the wiki, TiddlyWiki, via the Node.js package manager, [`npm`][15]:

```bash
# install TiddlyWiki, the '-g' option installs it globally
sudo npm install -g tiddlywiki

# check its version
tiddlywiki --version

```

When a new version of TiddlyWiki is released, you can easily upgrade it with this command:

```bash
# upgrade TiddlyWiki
sudo npm update -g tiddlywiki
```


# Publishing to GitHub Page
[GitHub can create a websites from a repository][03] and this is call GitHub Pages.
There are [two types of GitHub Pages][04]: Project Pages and User Pages.
We are using User Pages here.
Check out [A guide to using Github Pages][05] for more information.

To publish a Pelican site in the form of User Pages,
you need to `git push` the content of the output directory generated by Pelican
to the `master` branch of your `<site-name>.github.io` repository on GitHub.
The utility [`ghp-import`][02] (installed with `easy_install` or `pip`) can makes this easy.
It basically it goes like this

```bash
# publish the Pelican site
pelican content -o output -s pelicanconf.py
ghp-import output
git push git@github.com:my-github/my-site.github.io.git gh-pages:master
```

The `git push` command pushes the local gh-pages branch
(freshly updated by the `ghp-import` command)
to the `mysite.github.io` repository’s master branch on GitHub.

### Creating Your Initial Local Git Repository
If you create a file in your repository named [`.gitignore`][06],
Git uses it to determine which files and directories to ignore, before you make a commit.
Within the `~/blogging` directory should be this file:

```bash
### ---------- Project Specific Files ---------- ###
bin/
lib/
local/
output/
include/
.ropeproject/
pelican-themes/
pelican-plugins/
```

Also within the `~/blogging` directory, initialize it as a git repository

```bash
# initialize your git repository
cd ~/blogging
git init
```

Add all the files, and make initial comment

```bash
# add all the files to the git repository and make initial comment
git add .
git commit -m 'Initial commit'
```

### Creating the GitHub Repository
Goto GitHub.com and create the new repository

    goto https://github.com/jeffskinnerbox
    <create empty repository called 'jeffskinnerbox.github.io'>

Within the `~/blogging` directory,
associate this local git repository with the GitHub repository:

    git remote add origin https://github.com/jeffskinnerbox/jeffskinnerbox.github.io

### Publish Pelican Site
To publish a Pelican site in the form of User Pages,
you need to push the content of the `output` directory
(i.e. the HTML generated by Pelican for the website)
to the master branch of your `<username>.github.io` repository on GitHub.

    pelican content -o output -s publishconf.py
    ghp-import output
    git push origin gh-pages:master

Using `ghp-import` will over write your local `gh-pages` branch and the remote GitHub `master` branch.
In effect, GitHub's `master` branch will maintain the website's current content, but no history.

### Post the Website Source to GitHub
You do want to maintain a historical record of the website's source materials
(i.e. the markdown files).
To do this, we'll place the source materials for the website into GitHub as the `source` branch.
We'll use standard git procedures (i.e. no use of `ghp-import`).
See below for the procedure used:

    git add --all
    git commit -m "<comment>"
    git push origin master:source

The `git push` command pushes the local `master` branch
(which contains the source materials for the website) to the `<username>.github.io`
repository’s `source` branch on GitHub.

### Set Default Branch on GitHub
By default, GitHUb will display the contents of the `master` branch.
This is the processed HTML files for the website, but what is more desirable is the source for the website.
To make this the default,
goto the Settings and change "Default branch" to "source".

### Subsequent Updates
Going forward, the local git repository can be updated via

    git status
    git add --all
    git commit -m <comment>

And the GitHub based website can be updated via

    pelican content -o output -s publishconf.py
    ghp-import output
    git push origin gh-pages:master

And the source code for the website can be updated via

    git add --all
    git commit -m "<comment>"
    git push origin master:source

### Git Status Message
Once you start making pushes to GitHub,
you'll find that the executing of `git status` will give you something like this

```
$ git status
On branch master
Your branch and 'origin/master' have diverged,
and have 5 and 2 different commits each, respectively.
  (use "git pull" to merge the remote branch into yours)

nothing to commit, working directory clean
```

This "error" is caused by independent commits
associated with the local and remote repositories.
In the example above,
5 on the local origin copy and 2 on the remote master copy.
This is to be expected give that the remote `master` branch isn't maintaining any history.

Also note that if you do a git branch (or to "see it", using [`gitg`][07]), you'll get

```
git branch
  gh-pages
* master
```

So while you local `master` contains your website content and source,
the remote `master` is an image of the local branch `gh-pages`,
and the remote `source` is an image of a subset of your local `master`
(i.e. just the Markdown, templates, tools, etc. but not the generated HTML).

I suggest you just live with this message from `git`.
With the right combination and sequence of
`git rebase`, `git checkout`, `git push`, `git reset --hard`, etc.
you might eliminate the message, but I'll be dammed if I know how to successfully do it!




# Random Notes

## To Do
Read the following:

* [GitHub Pages](http://pages.github.com/)
* [Jekyll](http://jekyllrb.com/)
* [Google Webmasters Tools](https://www.google.com/webmasters/)
* [Google Guidelines](http://www.feedthebot.com/)
* [Google Analytics](http://www.google.com/intl/en/analytics/)
* []()

To test out the web site, use the command `jekyll serve --watch --drafts`
and then go to `http://localhost:4000/`.



[01]:http://opensource.org/licenses/MIT
[02]:https://github.com/davisp/ghp-import
[03]:http://pages.github.com/
[04]:https://help.github.com/articles/user-organization-and-project-pages
[05]:http://www.thinkful.com/learn/a-guide-to-using-github-pages/
[06]:https://help.github.com/articles/ignoring-files/
[07]:https://wiki.gnome.org/Apps/Gitg/
[08]:
[09]:
